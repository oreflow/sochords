for f in proto/*.proto; do
    # Removes proto/
    FILENAME="${f/proto\//}"
    # Removes .proto
    FILENAME="${FILENAME/\.proto/}"

    JS_OUT="gen/proto/${FILENAME}.js"
    TS_OUT="gen/proto/${FILENAME}.d.ts"

    echo "Compling $f"
    echo "JS Output: $JS_OUT"
    ./node_modules/.bin/pbjs \
        -t static-module \
        -w commonjs \
        -o $JS_OUT \
        $f
    echo "TS Output: $TS_OUT"
    ./node_modules/.bin/pbts \
        -o $TS_OUT \
        $JS_OUT
done